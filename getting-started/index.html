<!DOCTYPE HTML>
<html lang="en" class="light" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Getting Started - Tokei Book</title>


        <!-- Custom HTML head -->
        
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->

    </head>
    <body class="sidebar-visible no-js">
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('light')
            html.classList.add(theme);
            var body = document.querySelector('body');
            body.classList.remove('no-js')
            body.classList.add('js');
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var body = document.querySelector('body');
            var sidebar = null;
            var sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            body.classList.remove('sidebar-visible');
            body.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="../index.html">Introduction</a></li><li class="chapter-item expanded "><a href="../getting-started/index.html" class="active"><strong aria-hidden="true">1.</strong> Getting Started</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../getting-started/prerequisites.html"><strong aria-hidden="true">1.1.</strong> Prerequisites</a></li><li class="chapter-item expanded "><a href="../getting-started/build.html"><strong aria-hidden="true">1.2.</strong> Build the contracts</a></li><li class="chapter-item expanded "><a href="../getting-started/test.html"><strong aria-hidden="true">1.3.</strong> Test the contracts</a></li><li class="chapter-item expanded "><a href="../getting-started/user.html"><strong aria-hidden="true">1.4.</strong> Interact with contract as a User</a></li><li class="chapter-item expanded "><a href="../getting-started/admin.html"><strong aria-hidden="true">1.5.</strong> Interact with contract as an Admin</a></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <!-- Track and set sidebar scroll position -->
        <script>
            var sidebarScrollbox = document.querySelector('#sidebar .sidebar-scrollbox');
            sidebarScrollbox.addEventListener('click', function(e) {
                if (e.target.tagName === 'A') {
                    sessionStorage.setItem('sidebar-scroll', sidebarScrollbox.scrollTop);
                }
            }, { passive: true });
            var sidebarScrollTop = sessionStorage.getItem('sidebar-scroll');
            sessionStorage.removeItem('sidebar-scroll');
            if (sidebarScrollTop) {
                // preserve sidebar scroll position when navigating via links within sidebar
                sidebarScrollbox.scrollTop = sidebarScrollTop;
            } else {
                // scroll sidebar to current active section when navigating via "next/previous chapter" buttons
                var activeSection = document.querySelector('#sidebar .active');
                if (activeSection) {
                    activeSection.scrollIntoView({ block: 'center' });
                }
            }
        </script>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Tokei Book</h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/starknet-io/tokei" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>
                        <a href="https://github.com/starknet-io/tokei/book/src/getting-started/README.md" title="Suggest an edit" aria-label="Suggest an edit">
                            <i id="git-edit-button" class="fa fa-edit"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="getting-started-with-tokei-lockup-linear-contract"><a class="header" href="#getting-started-with-tokei-lockup-linear-contract">Getting Started with Tokei Lockup Linear Contract</a></h1>
<p>Welcome to the Tokei Lockup Linear Contract on StarkNet. This guide will provide you with all the necessary information to get started with building, testing, and interacting with the contract, as well as administering it effectively.</p>
<h2 id="table-of-contents"><a class="header" href="#table-of-contents">üìùTable of Contents</a></h2>
<ul>
<li><a href="#about-tokei">About Tokei</a></li>
<li><a href="#prerequisites">Prerequisites</a></li>
<li><a href="#building-the-contracts">Building the Contracts</a></li>
<li><a href="#testing-the-contracts">Testing the Contracts</a></li>
<li><a href="#user-interaction-cli-tool">User Interaction CLI Tool</a></li>
<li><a href="#admin-interaction-script">Admin Interaction Script</a></li>
</ul>
<h2 id="about-tokei"><a class="header" href="#about-tokei">About Tokei</a></h2>
<p>In the digital age where blockchain technology is reshaping financial landscapes, the Tokei protocol emerges as a cutting-edge solution for token streaming. Inspired by Sablier's groundbreaking work, Tokei harnesses the power of Starknet's Layer 2 capabilities to offer a novel and secure approach to token allocation and distribution, setting a new paradigm in decentralized finance (DeFi).</p>
<h2 id="the-advent-of-tokei-a-new-era-in-token-streaming"><a class="header" href="#the-advent-of-tokei-a-new-era-in-token-streaming"><strong>The Advent of Tokei: A New Era in Token Streaming</strong></a></h2>
<p>At its essence, token streaming facilitates the continuous transfer of assets over time. Tokei elevates this concept by providing enhanced flexibility and customizability on Starknet, enabling users to create tailored streams that fit a plethora of financial scenarios.</p>
<h3 id="distinctive-features-of-tokei"><a class="header" href="#distinctive-features-of-tokei"><strong>Distinctive Features of Tokei</strong></a></h3>
<ul>
<li><strong>Linear Lockup Streams</strong>: Tokei's lockup linear streams are designed for a gradual and controlled release of funds, ideal for structured payment plans and corporate vesting schedules.</li>
<li><strong>Customization at Its Core</strong>: With adjustable parameters like start and end times, cliff durations, and options for cancelability and transferability, Tokei caters to diverse streaming needs.</li>
<li><strong>Integration with ERC Standards</strong>: Tokei supports ERC-20 tokens for streaming transactions and leverages ERC-721 (NFTs) to represent stream ownership, expanding its utility across asset classes.</li>
<li><strong>Transparent Fee Structure</strong>: The platform ensures fair dealings with a clear-cut mechanism for protocol fees and brokerage commissions.</li>
<li><strong>Administrative Oversight</strong>: Advanced features allow for administrative interventions, including setting fees, claiming revenues, and managing NFT descriptors.</li>
</ul>
<h2 id="a-closer-look-at-tokeis-mechanics-on-starknet"><a class="header" href="#a-closer-look-at-tokeis-mechanics-on-starknet"><strong>A Closer Look at Tokei's Mechanics on Starknet</strong></a></h2>
<p>Tokei's smart contract infrastructure orchestrates the entire lifecycle of token streams, from their inception to conclusion.</p>
<h3 id="stream-creation"><a class="header" href="#stream-creation"><strong>Stream Creation</strong></a></h3>
<p>Participants can initiate streams with specific durations or date ranges, defining the total amount and the type of asset, as well as other bespoke conditions.</p>
<h3 id="stream-management-and-oversight"><a class="header" href="#stream-management-and-oversight"><strong>Stream Management and Oversight</strong></a></h3>
<p>The protocol provides a suite of functions for obtaining comprehensive details about each stream, such as asset details, key timepoints, deposited sums, and the stream's current state.</p>
<h3 id="stream-conclusion"><a class="header" href="#stream-conclusion"><strong>Stream Conclusion</strong></a></h3>
<p>Streams can be terminated based on predefined conditions, with the protocol adeptly reallocating funds relative to the amount streamed and the remaining balance.</p>
<h3 id="withdrawals-and-ownership-transfers"><a class="header" href="#withdrawals-and-ownership-transfers"><strong>Withdrawals and Ownership Transfers</strong></a></h3>
<p>Users can withdraw from streams or transfer ownership, facilitated by NFT representations, further emphasizing Tokei's commitment to flexibility and security.</p>
<h2 id="practical-applications-and-implications"><a class="header" href="#practical-applications-and-implications"><strong>Practical Applications and Implications</strong></a></h2>
<p>Tokei's protocol unlocks a myriad of possibilities within the DeFi ecosystem:</p>
<ul>
<li><strong>Employee Vesting</strong>: For example, enterprises can implement Tokei to distribute tokens to employees systematically, thereby ensuring a transparent vesting journey.</li>
<li><strong>Subscription Services</strong>: Businesses can adopt token streaming as a payment method for subscription services, providing a seamless transaction flow.</li>
<li><strong>DAO Operations</strong>: DAOs can employ Tokei to regulate ongoing contributions and distributions, enhancing community engagement and financial management.</li>
</ul>
<h2 id="visualizing-token-streaming-with-tokei"><a class="header" href="#visualizing-token-streaming-with-tokei"><strong>Visualizing Token Streaming with Tokei</strong></a></h2>
<p>Let's visualize the process with an example:</p>
<ul>
<li><strong>Scenario</strong>: Evelyn wishes to stream 10,000 XYZ tokens to Jordan over three months.</li>
<li><strong>Execution</strong>: She locks the XYZ tokens into Tokei's smart contract at the start of April, with the stream set to end in July.</li>
<li><strong>Token Accrual</strong>: As the days of April unfold, Jordan's balance begins to grow in real-time.</li>
<li><strong>Withdrawal Option</strong>: By the 10th of April, Jordan has access to a portion of the tokens and can choose to withdraw at any time.</li>
</ul>
<p><em>The graph here depicts a consistent token stream without a cliff.</em></p>
<img width="528" alt="Screenshot 2024-01-25 at 11 35 54‚ÄØPM" src="https://github.com/Akashneelesh/tokei/assets/66639153/68abfa36-3117-452c-87b7-d0e1a73e6d95">
<p>Should Evelyn choose to retract her tokens, she has the autonomy to cancel the stream and retrieve the unstreamed tokens.</p>
<h3 id="introducing-cliffs-for-enhanced-control"><a class="header" href="#introducing-cliffs-for-enhanced-control"><strong>Introducing Cliffs for Enhanced Control</strong></a></h3>
<p>Tokei introduces the concept of cliffs to add a strategic pause in the token release schedule:</p>
<ul>
<li><strong>Vesting with Cliffs</strong>: Consider a business that sets a 6-month cliff for an employee's token vesting, followed by a 2-year linear stream. If the employee exits the company prematurely, the business can cancel the stream and secure the assets not yet streamed.</li>
</ul>
<p><em>This graph showcases a Lockup Linear stream with a cliff. The horizontal plateau represents the cliff duration, after which the linear increase in streamed tokens resumes.</em></p>
<img width="522" alt="Screenshot 2024-01-25 at 11 36 06‚ÄØPM" src="https://github.com/Akashneelesh/tokei/assets/66639153/b787c0f0-38a6-42e3-af83-d9233d81bd4e">
<h2 id="prerequisites"><a class="header" href="#prerequisites">üìñPrerequisites</a></h2>
<p>Before you begin, make sure you have the following prerequisites installed:</p>
<ul>
<li>Starknet Foundry</li>
<li>Scarb</li>
<li>Starknet.js</li>
<li>Node.js (for User and Admin scripts)</li>
<li>TypeScript</li>
</ul>
<p>More details: <a href="https://foundry-rs.github.io/starknet-foundry/">Starknet Foundry</a></p>
<h2 id="-building-the-contracts"><a class="header" href="#-building-the-contracts">üèóÔ∏è Building the Contracts</a></h2>
<p>To build the smart contracts, open a terminal and execute:</p>
<pre><code class="language-bash">scarb build
</code></pre>
<p>This command will compile the smart contracts and output them to the target directory. For a detailed structure of the output, see <a href="(https://github.com/Akashneelesh/tokei/blob/main/book/src/getting-started/build.html">build.md</a>.</p>
<h2 id="testing-the-contracts"><a class="header" href="#testing-the-contracts">üî®Testing the Contracts</a></h2>
<p>Run the following command to test the contracts:</p>
<pre><code class="language-bash">snforge test
</code></pre>
<p>This executes tests located in the tests directory. Sample output:</p>
<pre><code>Collected 38 test(s) from tokei package
Running 38 test(s) from src/
[PASS] tokei::tests::... (detailed test results)
</code></pre>
<p>For more detailed view about the test cases see <a href="https://github.com/Akashneelesh/tokei/blob/main/book/src/getting-started/test.md">test.md</a>.</p>
<h2 id="-user-interaction-cli-tool"><a class="header" href="#-user-interaction-cli-tool">‚öô User Interaction CLI Tool</a></h2>
<p>The User Interaction CLI tool is designed for easy interaction with the streaming contract. It supports various functionalities such as creating streams, withdrawing funds, and querying stream details. To use this tool, you need to install certain dependencies and follow the steps outlined in <a href="https://github.com/Akashneelesh/tokei/blob/main/book/src/getting-started/user.md">user.md</a>.</p>
<h3 id="key-functionalities-include"><a class="header" href="#key-functionalities-include">Key functionalities include:</a></h3>
<ul>
<li>Stream creation and management</li>
<li>Asset management</li>
<li>Fee and NFT integration</li>
</ul>
<p>For detailed instructions on installation, usage, and examples, please refer to <a href="https://github.com/Akashneelesh/tokei/blob/main/book/src/getting-started/user.md">user.md</a>.</p>
<h2 id="-admin-interaction-script"><a class="header" href="#-admin-interaction-script">üëÆ‚Äç‚ôÇÔ∏è Admin Interaction Script</a></h2>
<p>The Admin Interaction Script facilitates the management of the Tokei Lockup Linear Contract. It includes features for setting and retrieving protocol fees, claiming protocol revenues, and viewing administrative details.</p>
<h3 id="key-aspects-include"><a class="header" href="#key-aspects-include">Key aspects include:</a></h3>
<ul>
<li>Stream creation and management</li>
<li>Fee handling</li>
<li>NFT Integration</li>
<li>Core functionalities and key structures
For complete guidelines on installation, usage, and available functions, see <a href="https://github.com/Akashneelesh/tokei/blob/main/book/src/getting-started/admin.md">admin.md</a>.</li>
</ul>
<h2 id="-resources"><a class="header" href="#-resources">üìö Resources</a></h2>
<p>Here are some resources to help you get started:</p>
<ul>
<li><a href="https://book.cairo-lang.org/">Cairo Book</a></li>
<li><a href="https://book.starknet.io/">Starknet Book</a></li>
<li><a href="https://foundry-rs.github.io/starknet-foundry/">Starknet Foundry Book</a></li>
<li><a href="https://starknet-by-example.voyager.online/">Starknet By Example</a></li>
<li><a href="https://book.starkli.rs/">Starkli Book</a></li>
</ul>
<h2 id="-license"><a class="header" href="#-license">üìñ License</a></h2>
<p>This project is licensed under the <strong>MIT license</strong>. See <a href="LICENSE">LICENSE</a> for more information.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../index.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="../getting-started/prerequisites.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../index.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="../getting-started/prerequisites.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="../elasticlunr.min.js"></script>
        <script src="../mark.min.js"></script>
        <script src="../searcher.js"></script>

        <script src="../clipboard.min.js"></script>
        <script src="../highlight.js"></script>
        <script src="../book.js"></script>

        <!-- Custom JS scripts -->


    </div>
    </body>
</html>
